@model List<Prodotto>;

@{
    string Categoria = ViewBag.NomeCategoria;
    ViewData["Title"] = $"EpiTech - {Categoria}";
}

<nav aria-label="breadcrumb" class="bg-light py-2 rounded mb-4 shadow-sm">
    <ol class="breadcrumb fw-bold mb-0 px-3">
        <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index" class="text-primary opacity-75">Home</a></li>
        <li class="breadcrumb-item"><a asp-controller="Prodotti" asp-action="Index" class="text-primary opacity-75">Prodotti</a></li>
        <li class="breadcrumb-item active text-dark" aria-current="page">@ViewBag.NomeCategoria</li>
    </ol>
</nav>
<div class="container-fluid" style="background-image: url(https://files.refurbed.com/hp/homepage/hp_banner_lg.webp); background-size: cover; background-position: center; background-repeat: no-repeat;width: 100vw; position: relative; left: 50%; right: 50%; margin-left: -50.5vw; margin-right: auto; height: 200px;">
    <div class="text-center mb-5">
        <h2 class="fw-bold display-5" style="font-weight: 700; color: #f8f8f8; font-size: 80px;">@ViewBag.NomeCategoria</h2>
        <p class="fw-semibold fs-5 mt-5" style="font-size: 1.2rem; color: #ffff;">Trova i migliori prodotti @ViewBag.NomeCategoria con almeno 12 mesi di garanzia e il miglior rapporto qualità-prezzo.</p>
    </div>
</div>

    
<hr class="mb-5" />

<div class="container">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
        @* TODO inserire controlli NULL *@
        @foreach (var product in Model)
            {
                <div class="col">
                    <div class="card h-100 border-0 shadow-lg rounded-3 overflow-hidden">
                        <a asp-controller="Dettaglio" asp-action="Index" asp-route-id="@product.IdProdotto" class="d-block text-center p-3">
                            <img src="@product.Immagine" class="card-img-top" alt="@product.Nome" style="height: 200px; object-fit: contain; transition: transform 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        </a>
                        <div class="card-body text-center">
                            <a asp-controller="Dettaglio" asp-action="Index" asp-route-id="@product.IdProdotto" class="text-decoration-none text-dark fw-bold fs-5 d-block mb-2">@product.Nome</a>
                            <p class="card-text text-success fw-bold fs-4">€ @product.Prezzo.ToString("N2")</p>
                        </div>
                        <div class="card-footer bg-transparent border-0 p-3 text-center">
                            <form asp-controller="Carrello" asp-action="AggiungiAlCarrello" method="post" asp-route-id="@product.IdProdotto" asp-route-number="1">
                                <input type="hidden" name="idProdotto" value="@product.IdProdotto" />
                                <button type="submit" class="btn BtnCustomHome CategoryBtn w-100 fw-bold py-2 shadow-sm">Acquista Ora</button>
                            </form>
                        </div>
                    </div>
                </div>
            
        }
        else
        {
            <div class="col-12 text-center">
                <p class="text-muted fs-4">Nessun prodotto disponibile in questa categoria.</p>
            </div>
        }
    </div>
</div>


<style>
    body {
        overflow-x: hidden;
    }

</style>